<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Abhishek" />


<title>Data Analysis</title>

<script src="site_libs/jquery-1.12.4/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="site_libs/datatables-binding-0.10/datatables.js"></script>
<link href="site_libs/dt-core-1.10.19/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="site_libs/dt-core-1.10.19/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="site_libs/dt-core-1.10.19/js/jquery.dataTables.min.js"></script>
<link href="site_libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">PROJECT ON NHTS SURVEY</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
<li>
  <a href="Analysis.html">Analysis</a>
</li>
<li>
  <a href="Explanation.html">Explanation</a>
</li>
<li>
  <a href="Comparison.html">Comparison</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Data Analysis</h1>
<h4 class="author">Abhishek</h4>
<h4 class="date">12/9/2019</h4>

</div>


<p>For doing this analysis, I used three data sets from NHTS(National Household Travel Survey), the 2001, 2009 and 2017 datasets</p>
<p>And the data from these datasets used are :</p>
<p>HHFAMINC - Household income</p>
<p>03 - $15,000 TO $24,999;</p>
<p>07 - $75,000 to $99,999;</p>
<p>09 - $125,000 to $149,999</p>
<p>I used these 3 income groups to represent the three types of income groups, lower, medium and high, as they have the most number of people than consequent datasets.</p>
<p>HHVEHCNT - Count of Household vehicles</p>
<p>RAIL- MSA heavy rail status for household</p>
<p>WTHHFIN - Data needed to weight Household data</p>
<p>CNTTDHH - Count of household trips on travel day</p>
<pre class="r"><code>#Extracting the data and assigning them to a dataset


library(tidyverse)

year_2001 &lt;- read_csv(&quot;2001/HHPUB.csv&quot;) %&gt;%
  mutate(HOUSEID = as.factor(HOUSEID), Year = c(rep (2001, 69817))) %&gt;%
  select(HHFAMINC, CNTTDHH, HHVEHCNT, Year, RAIL, WTHHFIN, MSASIZE)

year_2009 &lt;- read_csv(&quot;2009/HHPUB.csv&quot;)%&gt;%
  mutate(HOUSEID = as.factor(HOUSEID), Year = c(rep (2009, 150147)))%&gt;%
  select(HHFAMINC, CNTTDHH, HHVEHCNT, Year, RAIL, WTHHFIN, MSASIZE)

year_2017 &lt;- read_csv(&quot;2017/hhpub.csv&quot;)%&gt;%
  mutate(HOUSEID = as.factor(HOUSEID), Year = c(rep (2017, 129696)))%&gt;%
  select(HHFAMINC, CNTTDHH, HHVEHCNT, Year, RAIL, WTHHFIN, MSASIZE)</code></pre>
<p>Below, we can see that there are a lot of trips made by people in the medium incomde group, infact more than people in the higher and lower income groups.</p>
<p>The below shown data are geom columns, a way of displaying data in R, in which the x-axis represents the family income groups and the y-axis represents the number of trips made by the different income groups.</p>
<p>2001 - In 2001 we can see that there are nearly the same number of trips made by the income groups 07 and 09. The no. of trips made by the income group 03 is significantly lower than the other two.</p>
<pre class="r"><code>#Creation of geom col

year_2001 %&gt;%
  filter(HHFAMINC %in% c(&quot;03&quot;,&quot;07&quot;,&quot;09&quot;))%&gt;%
  ggplot(aes(x = HHFAMINC, y = CNTTDHH, weight = WTHHFIN)) + geom_col(fill = &quot;blue&quot;)</code></pre>
<p><img src="Analysis_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>2009 - Compared to the previous year observed, there is approximately the same number of trips made by the 03, 09 income groups, but still the group 07 has more trips.</p>
<p><img src="Analysis_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>2017 - A major increase in the number of trips from the above previous years. Majority of the trips are made by the income group 07 and they consitute to nearly the total trips made by the groups 03 and 09.</p>
<p><img src="Analysis_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>I have also displayed the car ownership data of the three income groups to show the density of car ownership and we can see from the data that there is more ownership of two cars in the income group 07.</p>
<p>2001 - Clearly more number of people in the group 03 have more single cars.</p>
<pre class="r"><code>library(DT)

datatable(head(year_2001))</code></pre>
<div id="htmlwidget-41c115e2af1e8b8ecaa8" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-41c115e2af1e8b8ecaa8">{"x":{"filter":"none","data":[["1","2","3","4","5","6"],["18","04","-7","17","05","16"],[10,5,7,5,2,6],[3,1,2,3,1,2],[2001,2001,2001,2001,2001,2001],[1,2,2,1,2,2],[10455.926335,3360.2960336,2270.9813241,3633.4688387,2066.7170749,2632.1977337],[5,4,6,5,2,6]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>HHFAMINC<\/th>\n      <th>CNTTDHH<\/th>\n      <th>HHVEHCNT<\/th>\n      <th>Year<\/th>\n      <th>RAIL<\/th>\n      <th>WTHHFIN<\/th>\n      <th>MSASIZE<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3,4,5,6,7]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>#Creation of Violin plot


violin_plot2001 = year_2001%&gt;%
  filter(HHFAMINC %in% c(&quot;03&quot;,&quot;07&quot;,&quot;09&quot;))%&gt;%
  mutate(Vehicles = ifelse(HHVEHCNT &gt; 3, 4, HHVEHCNT),
         Income = factor(HHFAMINC,levels = c(&quot;03&quot;,&quot;07&quot;,&quot;09&quot;), labels = c(&quot;Low&quot;,&quot;Medium&quot;,&quot;High&quot;)))%&gt;%
  ggplot(aes(x = Income, y = Vehicles, weight = WTHHFIN, fill = Income))+
  geom_violin(trim = FALSE)+scale_fill_brewer(palette=&quot;Dark2&quot;, name = &quot;Income groups&quot;)

violin_plot2001</code></pre>
<p><img src="Analysis_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>2009 - This year, we can observe that people in the groups 07 and 09 possess nearly the same level of ownership of 2 to 3 cars. <div id="htmlwidget-7ff89a67f3c57f1f5d36" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-7ff89a67f3c57f1f5d36">{"x":{"filter":"none","data":[["1","2","3","4","5","6"],["18","08","06","03","16","17"],[13,5,6,4,16,14],[3,1,2,0,3,3],[2009,2009,2009,2009,2009,2009],["02","02","02","01","02","02"],[264.19469357,1278.1298855,383.45059859,2834.4889714,131.5991816,704.59468988],["03","03","03","05","06","02"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>HHFAMINC<\/th>\n      <th>CNTTDHH<\/th>\n      <th>HHVEHCNT<\/th>\n      <th>Year<\/th>\n      <th>RAIL<\/th>\n      <th>WTHHFIN<\/th>\n      <th>MSASIZE<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3,4,6]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script></p>
<p><img src="Analysis_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>2017 - Now, as per the latest survey data collected, there is almost the same car ownership of 1 car in the group 03 as there is ownership of 2 cars in the group 07.</p>
<div id="htmlwidget-208d9006dffb8701cd37" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-208d9006dffb8701cd37">{"x":{"filter":"none","data":[["1","2","3","4","5","6"],["07","08","10","03","05","10"],[6,2,9,4,10,11],[5,4,2,2,2,2],[2017,2017,2017,2017,2017,2017],["02","02","02","02","02","02"],[187.314319874054,69.5130321150354,79.4195860434883,279.143588401308,103.240303874967,2329.52533228939],["01","05","03","02","03","03"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>HHFAMINC<\/th>\n      <th>CNTTDHH<\/th>\n      <th>HHVEHCNT<\/th>\n      <th>Year<\/th>\n      <th>RAIL<\/th>\n      <th>WTHHFIN<\/th>\n      <th>MSASIZE<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3,4,6]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p><img src="Analysis_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>To get the data prepared for analysis, I weighted the HHFAMINC data to the weighted household data in the hhpub file.</p>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
